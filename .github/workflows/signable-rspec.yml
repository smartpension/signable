name: CI RSpec Tests

on:
  push:
    paths:
    - 'signable/**'
  pull_request:
    paths:
    - 'signable/**'

jobs:
  build:
  - name: Run bundle install
    working-directory: ${{env.api-dir}}
    run: |
      gem install bundler
      bundle install --jobs 4 --retry 3

  - name: Build and test with rspec
    working-directory: ${{env.api-dir}}
    env:
      RAILS_ENV: test
    run: bundle exec rspec
